# Статистические методы поиска выбросов

## Понятие выброса
Одинм из этапов очистки данных является поиск выбросов.

**Выброс (аномалия)** - это наблюдение, которое существенно выбивается из общего распределения и сильно отличается от других данных.

В данном разделе рассматриваются статистические методы поиска выбросов, а именно:
+ Метод межквартального размаха
+ Метод z-отклонений (метод сигм)

## Метод межквартального размаха

![](https://tse1.mm.bing.net/th?id=OIP.CXREFWkKDdHLRrxMKRD1eQHaDb&pid=15.1)

### Алгоритм метода

1. Вычислить 25-ю и 75-ю квантили (1 и 3 квартили): $Q_{25}$ и $Q_{75}$ для признака, который мы исследуем
2. Вычислить межквартильное расстояние:
* $IQR = Q_{75} - Q_{25}$
3. Определить верхнюю и нижнюю границы Тьюки:
* $bound_{upper} = Q_{75} + 1.5*IQR$
* $bound_{lower} = Q_{25} - 1.5*IQR$
4. Найти наблюдения, которые выходят за пределы границ

### Недостатки метода:

Метод требует, чтобы признак, на основе которого происходит поиск выбросов, был распределён нормально.

### Модификация метода:

Можно попробовать воспользоваться методом преобразования данных, например, логарифмированием, чтобы попытаться свести распределение к нормальному или хотя бы к симметричному.

Также можно добавить вариативности количеству квартильных размахов в левую и правую стороны распределения.

## Метод z-отклонений (метод сигм)

Правило трёх сигм: если распределение данных является нормальным, то 99.73% наблюдений лежат в интервале $(\mu-3\sigma$, $\mu+3\sigma)$,
где
* $\mu$ - математическое ожидание (для выборки это среднее значение),
* $\sigma$ - стандартное отклонение.

Наблюдения, которые лежат за пределами этого интервала будут считаться выбросами.

![](https://openbooks.lib.msu.edu/app/uploads/sites/25/2020/04/4.2_Normal-Distribution.jpg)

### Алгоритм метода

1. Вычислить среднее $\mu$ и стандартное отклонение $\sigma$ для признака, который мы исследуем
2. Определить верхнюю и нижнюю границы:
* $bound_{upper} = \mu + 3*\sigma$
* $bound_{lower} = \mu - 3*\sigma$
3. Найти наблюдения, которые выходят за пределы границ

### Недостатки метода:

Метод требует, чтобы признак, на основе которого происходит поиск выбросов, был распределён нормально.

### Модификация метода:

Можно попробовать воспользоваться методом преобразования данных, например, логарифмированием, чтобы попытаться свести распределение к нормальному или хотя бы к симметричному.

Также можно добавить вариативности количеству квартильных размахов в левую и правую стороны распределения.

## Реализация методов

Методы реализованы в виде функций find_outliers_iqr() и find_outliers_z_score(). Функции находятся в файле find_outliers.py. К функциям предоставлена документация.

## Примеры использования

